---
layout: post
title: "웹을 통한 이미지 업로드 방법과 속도 이슈 (Node.js)"
date: 2020-05-22 00:00:00 -0400
background: '/img/bg-post.jpg'
---

<p>
웹을 통한 이미지 업로드 방법과 속도 이슈 (Node.js)<br>
<br>
웹앱에서 이미지 업로드는 흔하게 쓰이는 기술이다.<br>
Node.js 만하더라도 여러 개의 이미지 업로드 패키지 라이브러리가 제공되며, 이를 이용하면 비교적 간단하게 이미지 업로드 구현이 가능하다.<br>
하지만 이미지 업로드 속도와 관련된 성능 이슈와 최적화는 또다른 문제이며, 사용성을 생각한다면 한번쯤 고민해보아야 할 문제이다.<br>
<br>
[이미지 업로드 방법]<br>
1. 서버에 이미지를 업로드하기 위해, Multer 라는 Node.js 패키지 라이브러리를 사용한다.<br>
2. 추가로, 서버에 업로드된 이미지를 리사이징 하기 위해서는 sharp 라는 Node.js 패키지 라이브러리를 사용한다.<br>
<br>
위와 같은 방법으로 브라우저를 통해 클라이언트단에서 웹서버로 이미지 업로드를 진행할 수 있다.<br>
하지만 다수의 웹앱에서 이미지 업로드 시, 썸네일 이미지를 별도로 보여주는 경우가 많고, 이때 서버에 업로드된 이미지의 경로를 다시 받아와서 클라이언트단에서 썸네일 이미지로 보여주어야 한다.<br>
여기서 속도와 관련된 이슈가 발생할 수 있다. 서버에서 처리하는 한계도 있으며(물론 일반적으로 서버 컴퓨터의 처리속도가 더 빠르지만) 네트워크 성능 이슈에 큰 영향을 받는다.<br>
결국, 썸네일 이미지 로딩 시간이 길어지는 사용성을 해치는 이슈를 동반할 가능성이 크다.<br>
<br>
[이미지 업로드 속도 이슈 개선방법]<br>
한가지 확실한 방법은, 이미지를 웹서버에 업로드 하기 전에, 클라이언트단에서 먼저 리사이징 작업을 거치고 업로드하는 것이다.<br>
이렇게 되면 서버에서 처리하는 비용을 줄이고, 영향을 최소화할 수 있다. 그리고 네트워크속도의 영향도 덜 받게된다.<br>
<br>
클라이언트단에서 이미지 리사이징을 처리해주는 모듈로는 자바스크립트를 이용한 compressorjs 가 있다.<br>
대개 이런식으로 클라이언트단에서 미리 리사이징을 하고 서버로 이미지를 업로드하게 로직을 구현하면, 전체적으로 업로드 속도 향상을 할 수 있다.<br>
<br>
하지만, 클라이언트단에서 이미지 리사이징을 하는 것은, 아무래도 업로드를 하는 단말기의 하드웨어 성능에 영향을 받을 수 밖에 없다.<br>
또한 원본 이미지를 서버에 저장하지 않는다는 단점이 있을 수 있다. (상황에 따라 다양한 해상도로 보여주어야 하는 경우)<br>
</p>

<p></p>
